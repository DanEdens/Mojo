

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Mojo.ObjectMapper &mdash; Mojo 0.1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Mojo 0.1 documentation" href="../../index.html" />
    <link rel="next" title="Mojo.RequestHandlers" href="RequestHandlers.html" />
    <link rel="prev" title="Mojo.Backends" href="Backends.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="RequestHandlers.html" title="Mojo.RequestHandlers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Backends.html" title="Mojo.Backends"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Mojo 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mojo-objectmapper">
<h1>Mojo.ObjectMapper<a class="headerlink" href="#mojo-objectmapper" title="Permalink to this headline">¶</a></h1>
<p>The Mojo object mapper is not strictly database-bound ORM, the purpose of the ORM is to offer data integrity and validation
as part of the data solution. As Mojo is mainly built around MongoDB (for now), the models offer a way to ensure some consistency
in a schemaless database.</p>
<p>The Object Mapper defines two main things: <tt class="docutils literal"><span class="pre">Fields</span></tt> that can be used to set up validation rules on data types and <tt class="docutils literal"><span class="pre">Models</span></tt>,
collections of fields that will validate all of their containing fields and map to dictionaries under the hood.</p>
<p><tt class="docutils literal"><span class="pre">Models</span></tt> come with multiple database functions (<tt class="docutils literal"><span class="pre">save</span></tt>, <tt class="docutils literal"><span class="pre">find</span></tt>, <tt class="docutils literal"><span class="pre">find_one</span></tt>, <tt class="docutils literal"><span class="pre">delete</span></tt>, <tt class="docutils literal"><span class="pre">delete_bulk</span></tt>) that also have asynchronous variants
(<tt class="docutils literal"><span class="pre">save_async</span></tt>, <tt class="docutils literal"><span class="pre">find_async</span></tt>, <tt class="docutils literal"><span class="pre">find_one_async</span></tt>, <tt class="docutils literal"><span class="pre">delete_async</span></tt>, <tt class="docutils literal"><span class="pre">delete_bulk_async</span></tt>) that need to be called depending on the underlying
database back-end that has been chosen.</p>
<div class="section" id="base-field-type">
<h2>Base Field Type<a class="headerlink" href="#base-field-type" title="Permalink to this headline">¶</a></h2>
<p>This is the base field type that all others inherit from, it can be subclassed to create custom model fields to
extend your models.</p>
<span class="target" id="module-Mojo.ObjectMapper.FieldPrototype"></span><dl class="class">
<dt id="Mojo.ObjectMapper.FieldPrototype.Field">
<em class="property">class </em><tt class="descclassname">Mojo.ObjectMapper.FieldPrototype.</tt><tt class="descname">Field</tt><big>(</big><em>value=None</em>, <em>allow_empty=True</em>, <em>default=None</em>, <em>friendly=''</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.FieldPrototype.Field" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="docutils literal"><span class="pre">FieldPrototype.Field</span></tt> is a parent class for the Fields exposed in <tt class="docutils literal"><span class="pre">ObjectMapper.Fields</span></tt>,
Offering base functionality and validation options:
#. validate_type - validates to ensure the base_type class variable is met
#. validate_is_null - ensures that the property is not null (if set)</p>
<p><strong>Usage:</strong> New Field types will inherit from this class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">Mojo.ObjectMapper.FieldPrototype</span> <span class="kn">import</span> <span class="n">Field</span>

<span class="c">#Subclass Field to create a new field type</span>
<span class="k">class</span> <span class="nc">StringField</span><span class="p">(</span><span class="n">Field</span><span class="p">):</span>
    <span class="n">base_type</span> <span class="o">=</span> <span class="nb">unicode</span> <span class="c">#Must be set to the base type of object you want to save</span>

    <span class="c">#Define your validation methods here and override the validate function to include them:</span>

    <span class="k">def</span> <span class="nf">validate_max_length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">#e.g. let&#39;s allow this field to have a maximum length</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_length</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_length</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s"> must be shorter than </span><span class="si">%i</span><span class="s"> characters&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span>
                                                                            <span class="bp">self</span><span class="o">.</span><span class="n">max_length</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">#Call the parent validation methods</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">StringField</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">validate</span><span class="p">()</span>

        <span class="c">#Run our own validation methods</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_length</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_max_length</span><span class="p">()</span>
</pre></div>
</div>
<p>For a full example see the source for <tt class="docutils literal"><span class="pre">Mojo.ObjectMapper.Fields.StringField</span></tt> as the above example omits the <tt class="docutils literal"><span class="pre">__init__()</span></tt> overrides that
establish required properties.</p>
<p>When defining fields it is also possible to inherit from an existing field type, for example, the <tt class="docutils literal"><span class="pre">FloatField</span></tt> field type inherits from
the <tt class="docutils literal"><span class="pre">IntegerField</span></tt> type, this means we can chain functionality together for more finer-grained subtypes.</p>
<p><strong>Methods to override</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">validate_type</span></tt>: For example, if you have a subtype you would like to take advantage of or do explicit typecasting, see the source for <tt class="docutils literal"><span class="pre">StringField</span></tt> which coerces strings to unicode</li>
<li><tt class="docutils literal"><span class="pre">validate</span></tt>: To run your custom value validations</li>
<li><tt class="docutils literal"><span class="pre">get_value</span></tt>: To return the correct value back to the user</li>
</ul>
<dl class="method">
<dt id="Mojo.ObjectMapper.FieldPrototype.Field.get_value">
<tt class="descname">get_value</tt><big>(</big><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.FieldPrototype.Field.get_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value stored in the field (string representations will be shown if you print the model, override
<tt class="docutils literal"><span class="pre">__str__</span></tt> and <tt class="docutils literal"><span class="pre">__unicode__</span></tt> to change this behaviour.</p>
</dd></dl>

<dl class="method">
<dt id="Mojo.ObjectMapper.FieldPrototype.Field.validate">
<tt class="descname">validate</tt><big>(</big><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.FieldPrototype.Field.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Will run all the validation rules, traditionally this will be overridden in a field class
depending on what validation logic has been added to the Field</p>
</dd></dl>

<dl class="method">
<dt id="Mojo.ObjectMapper.FieldPrototype.Field.validate_is_null">
<tt class="descname">validate_is_null</tt><big>(</big><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.FieldPrototype.Field.validate_is_null" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates if the value is empty. Will throw <tt class="docutils literal"><span class="pre">ValueError</span></tt> if <tt class="docutils literal"><span class="pre">allow_empty</span></tt> is false.</p>
</dd></dl>

<dl class="method">
<dt id="Mojo.ObjectMapper.FieldPrototype.Field.validate_type">
<tt class="descname">validate_type</tt><big>(</big><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.FieldPrototype.Field.validate_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic type validation, this is not strict - it will validate subtypes as well, override this
if you want to add coercion to your model (see the <tt class="docutils literal"><span class="pre">StringField</span></tt> and <tt class="docutils literal"><span class="pre">FloatField</span></tt> for an example)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="default-mojo-field-types">
<h2>Default Mojo Field Types<a class="headerlink" href="#default-mojo-field-types" title="Permalink to this headline">¶</a></h2>
<p>These fields are the default field types that come with Mojo and are used throughout the framework.</p>
<span class="target" id="module-Mojo.ObjectMapper.Fields"></span><dl class="class">
<dt id="Mojo.ObjectMapper.Fields.BooleanField">
<em class="property">class </em><tt class="descclassname">Mojo.ObjectMapper.Fields.</tt><tt class="descname">BooleanField</tt><big>(</big><em>value=None</em>, <em>allow_empty=True</em>, <em>default=None</em>, <em>friendly=''</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.Fields.BooleanField" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores True or False data.</p>
<p><strong>Validation methods</strong></p>
<ul class="simple">
<li><em>None</em></li>
</ul>
<dl class="attribute">
<dt id="Mojo.ObjectMapper.Fields.BooleanField.base_type">
<tt class="descname">base_type</tt><a class="headerlink" href="#Mojo.ObjectMapper.Fields.BooleanField.base_type" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">bool</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="Mojo.ObjectMapper.Fields.BooleanField.get_value">
<tt class="descname">get_value</tt><big>(</big><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.Fields.BooleanField.get_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value stored in the field (string representations will be shown if you print the model, override
<tt class="docutils literal"><span class="pre">__str__</span></tt> and <tt class="docutils literal"><span class="pre">__unicode__</span></tt> to change this behaviour.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="Mojo.ObjectMapper.Fields.DateTimeField">
<em class="property">class </em><tt class="descclassname">Mojo.ObjectMapper.Fields.</tt><tt class="descname">DateTimeField</tt><big>(</big><em>value=None</em>, <em>allow_empty=True</em>, <em>default=None</em>, <em>friendly=''</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.Fields.DateTimeField" title="Permalink to this definition">¶</a></dt>
<dd><p>DateTime object storage.</p>
<p><strong>Validation methods</strong></p>
<ul class="simple">
<li><em>None</em></li>
</ul>
<dl class="attribute">
<dt id="Mojo.ObjectMapper.Fields.DateTimeField.base_type">
<tt class="descname">base_type</tt><a class="headerlink" href="#Mojo.ObjectMapper.Fields.DateTimeField.base_type" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">datetime</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="Mojo.ObjectMapper.Fields.FloatField">
<em class="property">class </em><tt class="descclassname">Mojo.ObjectMapper.Fields.</tt><tt class="descname">FloatField</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.Fields.FloatField" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores Float values.</p>
<p><strong>Validation methods</strong></p>
<ul class="simple">
<li>Same as <tt class="docutils literal"><span class="pre">IntegerField</span></tt></li>
</ul>
<p><em>Note:</em> Will coerce integers into float values.</p>
<dl class="attribute">
<dt id="Mojo.ObjectMapper.Fields.FloatField.base_type">
<tt class="descname">base_type</tt><a class="headerlink" href="#Mojo.ObjectMapper.Fields.FloatField.base_type" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">float</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="Mojo.ObjectMapper.Fields.IntegerField">
<em class="property">class </em><tt class="descclassname">Mojo.ObjectMapper.Fields.</tt><tt class="descname">IntegerField</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.Fields.IntegerField" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores integer (<tt class="docutils literal"><span class="pre">int</span></tt>) data.</p>
<p><strong>Validation methods</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">max_value</span></tt>: maximum value of the integer</li>
<li><tt class="docutils literal"><span class="pre">min_value</span></tt>: minimum value of the stored value</li>
</ul>
<dl class="attribute">
<dt id="Mojo.ObjectMapper.Fields.IntegerField.base_type">
<tt class="descname">base_type</tt><a class="headerlink" href="#Mojo.ObjectMapper.Fields.IntegerField.base_type" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">int</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="Mojo.ObjectMapper.Fields.ListField">
<em class="property">class </em><tt class="descclassname">Mojo.ObjectMapper.Fields.</tt><tt class="descname">ListField</tt><big>(</big><em>of=None</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.Fields.ListField" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores a list of objects, objects in the list can be of type &#8216;Mojo.ObjectMapper.ModelPrototype.Model&#8217; and it will
try to expand and retrieve the relevant value from each on access.</p>
<p><strong>Validation methods</strong></p>
<ul class="simple">
<li><em>None</em></li>
</ul>
<dl class="attribute">
<dt id="Mojo.ObjectMapper.Fields.ListField.base_type">
<tt class="descname">base_type</tt><a class="headerlink" href="#Mojo.ObjectMapper.Fields.ListField.base_type" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">list</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="Mojo.ObjectMapper.Fields.ObjectIDField">
<em class="property">class </em><tt class="descclassname">Mojo.ObjectMapper.Fields.</tt><tt class="descname">ObjectIDField</tt><big>(</big><em>value=None</em>, <em>allow_empty=True</em>, <em>default=None</em>, <em>friendly=''</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.Fields.ObjectIDField" title="Permalink to this definition">¶</a></dt>
<dd><p>ObjectId storage - required for storing data in MongoDB, base type is <tt class="docutils literal"><span class="pre">bson.objectid.ObjectId</span></tt>.</p>
<p><strong>Validation methods</strong></p>
<ul class="simple">
<li><em>None</em></li>
</ul>
<dl class="attribute">
<dt id="Mojo.ObjectMapper.Fields.ObjectIDField.base_type">
<tt class="descname">base_type</tt><a class="headerlink" href="#Mojo.ObjectMapper.Fields.ObjectIDField.base_type" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">ObjectId</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="Mojo.ObjectMapper.Fields.StringField">
<em class="property">class </em><tt class="descclassname">Mojo.ObjectMapper.Fields.</tt><tt class="descname">StringField</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.Fields.StringField" title="Permalink to this definition">¶</a></dt>
<dd><p>Unicode string field for text based storage.</p>
<p><strong>Validation methods</strong></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">max_length</span></tt>: Checks for the maximum length of the string, raises ValueError if not met.</li>
</ul>
<dl class="attribute">
<dt id="Mojo.ObjectMapper.Fields.StringField.base_type">
<tt class="descname">base_type</tt><a class="headerlink" href="#Mojo.ObjectMapper.Fields.StringField.base_type" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">unicode</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="Mojo.ObjectMapper.ModelPrototype.EmbeddedModelField">
<em class="property">class </em><tt class="descclassname">Mojo.ObjectMapper.ModelPrototype.</tt><tt class="descname">EmbeddedModelField</tt><big>(</big><em>to</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.EmbeddedModelField" title="Permalink to this definition">¶</a></dt>
<dd><p>EmbeddedField type for models that enables embedding of documents into the model representation.</p>
<p><strong>Validation methods</strong></p>
<ul class="simple">
<li><em>None</em></li>
</ul>
<p><em>Note</em>: This type expects a Model base type and is in a different namespace, to use <tt class="docutils literal"><span class="pre">EmbeddedModelField</span></tt> you need to
import from the <tt class="docutils literal"><span class="pre">ModelPrototype</span></tt> namespace:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">ObjectMapper.ModelPrototype</span> <span class="kn">import</span> <span class="n">EmbeddedModelField</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="Mojo.ObjectMapper.ModelPrototype.EmbeddedModelField.base_type">
<tt class="descname">base_type</tt><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.EmbeddedModelField.base_type" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="models">
<h2>Models<a class="headerlink" href="#models" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">Models</span></tt> represent collections of <tt class="docutils literal"><span class="pre">Fields</span></tt>, and are subclasses of <tt class="docutils literal"><span class="pre">dict</span></tt>, so are easy to implement into Mongo-style queries
which use BSON-style data structures.</p>
<dl class="class">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model">
<em class="property">class </em><tt class="descclassname">Mojo.ObjectMapper.ModelPrototype.</tt><tt class="descname">Model</tt><big>(</big><em>data=None</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic Model class that defines the behaviours of Model objects, the class enables simple definition:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyTestModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">this_field</span> <span class="o">=</span>        <span class="n">StringField</span><span class="p">()</span>
    <span class="n">another_field</span> <span class="o">=</span>     <span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">whatever_field</span> <span class="o">=</span>    <span class="n">BooleanField</span><span class="p">()</span>
</pre></div>
</div>
<p>The class will evaluate <tt class="docutils literal"><span class="pre">validate()</span></tt> on each field when the value is retrieved and maps all values to an
internal <tt class="docutils literal"><span class="pre">dict</span></tt> (as it subclasses <tt class="docutils literal"><span class="pre">dict</span></tt>) it behaves a little like one by enabling [x] and dot-style assignment and retrieval
to values.</p>
<p>Models are recursive, so should produce a valid dict with <tt class="docutils literal"><span class="pre">EmbeddedField</span></tt> fields that are nested as they all expose
the <tt class="docutils literal"><span class="pre">get_value()</span></tt> function.</p>
<p>Models ca be instantiated form a dictionary, so if you have som raw data you want to store in a model, that&#8217;s fine:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyTestModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">this_field</span> <span class="o">=</span>        <span class="n">StringField</span><span class="p">()</span>
    <span class="n">another_field</span> <span class="o">=</span>     <span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">whatever_field</span> <span class="o">=</span>    <span class="n">BooleanField</span><span class="p">()</span>

<span class="n">my_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;this_field&#39;</span><span class="p">:</span>       <span class="s">&quot;Hello World&quot;</span><span class="p">,</span>
            <span class="s">&#39;another_field&#39;</span><span class="p">:</span>    <span class="mi">42</span><span class="p">,</span>
            <span class="s">&#39;whatever_field&#39;</span><span class="p">:</span>   <span class="bp">True</span>
          <span class="p">}</span>

<span class="n">new_model_instance</span> <span class="o">=</span> <span class="n">MyTestModel</span><span class="p">(</span><span class="n">my_data</span><span class="p">)</span>

<span class="k">print</span> <span class="n">new_model_instance</span>
<span class="c">#Output: {&#39;this_field&#39;:&quot;Hello World&quot;, &#39;another_field&#39;:42, &#39;whatever_field&#39;:True}</span>
</pre></div>
</div>
<dl class="method">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.delete">
<tt class="descname">delete</tt><big>(</big><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes an item form the database, takes a model as input (blocking).</p>
</dd></dl>

<dl class="method">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.delete_async">
<tt class="descname">delete_async</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.delete_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes an item form the database, takes a model as input (non-blocking).</p>
</dd></dl>

<dl class="classmethod">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.delete_bulk">
<em class="property">classmethod </em><tt class="descname">delete_bulk</tt><big>(</big><em>klass</em>, <em>to_delete</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.delete_bulk" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete items in a batch operation (blocking) - takes a list of models as input</p>
</dd></dl>

<dl class="classmethod">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.delete_bulk_async">
<em class="property">classmethod </em><tt class="descname">delete_bulk_async</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.delete_bulk_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete items in a batch operation (non-blocking) - takes a list of models as input</p>
</dd></dl>

<dl class="classmethod">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.find">
<em class="property">classmethod </em><tt class="descname">find</tt><big>(</big><em>klass</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a list of objects in the database, takes standard PyMongo-style input
parameters (blocking):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">users</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">find</span><span class="p">({})</span> <span class="c">#gets all users in the database</span>
<span class="k">print</span> <span class="n">users</span>
</pre></div>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.find_async">
<em class="property">classmethod </em><tt class="descname">find_async</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.find_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a list of objects in the database, takes standard PyMongo-style
input paramaters (non-blocking):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">users</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">gen</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">find_async</span><span class="p">,{})</span> <span class="c">#gets all users in the database</span>
<span class="k">print</span> <span class="n">users</span>
</pre></div>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.find_one">
<em class="property">classmethod </em><tt class="descname">find_one</tt><big>(</big><em>klass</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.find_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a single object in the database, takes standard PyMongo-style
input parameters (blocking):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">thisUser</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">find_one</span><span class="p">({</span><span class="s">&#39;username&#39;</span><span class="p">:</span><span class="n">username</span><span class="p">})</span> <span class="c">#Gets a specific user from the DB</span>
</pre></div>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.find_one_async">
<em class="property">classmethod </em><tt class="descname">find_one_async</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.find_one_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a single object in the database, takes standard PyMongo-style
input parameters (non-blocking):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">thisUser</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">gen</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">find_one</span><span class="p">,{</span><span class="s">&#39;username&#39;</span><span class="p">:</span><span class="n">username</span><span class="p">})</span> <span class="c">#Gets a specific user from the DB</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.get_value">
<tt class="descname">get_value</tt><big>(</big><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.get_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of the model - this is a <tt class="docutils literal"><span class="pre">dict</span></tt> - if you&#8217;re having trouble getting data out of the
model, calling this function will access the dictionary directly.</p>
</dd></dl>

<dl class="classmethod">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.insert">
<em class="property">classmethod </em><tt class="descname">insert</tt><big>(</big><em>klass</em>, <em>to_insert</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a model into the database (blocking).</p>
<p><strong>Usage:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">MyTestModel</span>

<span class="n">my_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;this_field&#39;</span><span class="p">:</span>       <span class="s">&quot;Hello World&quot;</span><span class="p">,</span>
        <span class="s">&#39;another_field&#39;</span><span class="p">:</span>    <span class="mi">42</span><span class="p">,</span>
        <span class="s">&#39;whatever_field&#39;</span><span class="p">:</span>   <span class="bp">True</span>
      <span class="p">}</span>

<span class="n">MyTestModel</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">MyTestModel</span><span class="p">(</span><span class="n">my_data</span><span class="p">))</span>
</pre></div>
</div>
<p>This will validate the fields before committing them to the database, without having to instantiate a new
model instance.</p>
</dd></dl>

<dl class="classmethod">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.insert_async">
<em class="property">classmethod </em><tt class="descname">insert_async</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.insert_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a model into the database (non-blocking).</p>
<p><strong>Usage:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">MyTestModel</span>

<span class="n">my_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;this_field&#39;</span><span class="p">:</span>       <span class="s">&quot;Hello World&quot;</span><span class="p">,</span>
        <span class="s">&#39;another_field&#39;</span><span class="p">:</span>    <span class="mi">42</span><span class="p">,</span>
        <span class="s">&#39;whatever_field&#39;</span><span class="p">:</span>   <span class="bp">True</span>
      <span class="p">}</span>

<span class="k">yield</span> <span class="n">gen</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span><span class="n">MyTestModel</span><span class="o">.</span><span class="n">insert_async</span><span class="p">,</span> <span class="n">MyTestModel</span><span class="p">(</span><span class="n">my_data</span><span class="p">))</span>
</pre></div>
</div>
<p>This will validate the fields before committing them to the database, without having to instantiate a new
model instance.</p>
</dd></dl>

<dl class="method">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.save">
<tt class="descname">save</tt><big>(</big><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the model instance to the database (blocking), unlike insert() this is an instance method so needs to be called by
and instantiated model instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">MyTestModel</span>

<span class="n">my_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;this_field&#39;</span><span class="p">:</span>       <span class="s">&quot;Hello World&quot;</span><span class="p">,</span>
        <span class="s">&#39;another_field&#39;</span><span class="p">:</span>    <span class="mi">42</span><span class="p">,</span>
        <span class="s">&#39;whatever_field&#39;</span><span class="p">:</span>   <span class="bp">True</span>
      <span class="p">}</span>

<span class="n">model_instance</span> <span class="o">=</span> <span class="n">MyTestModel</span><span class="p">(</span><span class="n">my_data</span><span class="p">)</span>
<span class="n">model_instance</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.save_async">
<tt class="descname">save_async</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.save_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the model instance to the database (non blocking), unlike insert() this is an instance method so needs to be called by
and instantiated model instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="n">MyTestModel</span>

<span class="n">my_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;this_field&#39;</span><span class="p">:</span>       <span class="s">&quot;Hello World&quot;</span><span class="p">,</span>
        <span class="s">&#39;another_field&#39;</span><span class="p">:</span>    <span class="mi">42</span><span class="p">,</span>
        <span class="s">&#39;whatever_field&#39;</span><span class="p">:</span>   <span class="bp">True</span>
      <span class="p">}</span>

<span class="n">model_instance</span> <span class="o">=</span> <span class="n">MyTestModel</span><span class="p">(</span><span class="n">my_data</span><span class="p">)</span>
<span class="k">yield</span> <span class="n">gen</span><span class="o">.</span><span class="n">Task</span><span class="p">(</span><span class="n">model_instance</span><span class="o">.</span><span class="n">save_async</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Mojo.ObjectMapper.ModelPrototype.Model.validate">
<tt class="descname">validate</tt><big>(</big><big>)</big><a class="headerlink" href="#Mojo.ObjectMapper.ModelPrototype.Model.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates the entire model, is called when _get_value() is called.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Mojo.ObjectMapper</a><ul>
<li><a class="reference internal" href="#base-field-type">Base Field Type</a></li>
<li><a class="reference internal" href="#default-mojo-field-types">Default Mojo Field Types</a></li>
<li><a class="reference internal" href="#models">Models</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Backends.html"
                        title="previous chapter">Mojo.Backends</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="RequestHandlers.html"
                        title="next chapter">Mojo.RequestHandlers</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/docs/api/ObjectMapper.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="RequestHandlers.html" title="Mojo.RequestHandlers"
             >next</a> |</li>
        <li class="right" >
          <a href="Backends.html" title="Mojo.Backends"
             >previous</a> |</li>
        <li><a href="../../index.html">Mojo 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Martin Buhr.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>